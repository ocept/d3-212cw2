<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Global Health and Health Inequality</title>
    <script src="//d3js.org/d3.v5.min.js" charset="utf-8"></script>
    <link rel = "stylesheet" href="style.css"/>
</head>
<body>
    <h1>Global Health and Health Inequality</h1>
    In this presentation I will show how data from the <a href="http://ghdx.healthdata.org/gbd-2017">2017 Global Burden of Disease</a> study 
    can be used to illustrate a narrative of global health and health inequality.

    <h2>Global health against GDP - 1960 to 2017</h2>
    The scatter diagram below plots life expectancy against gross domestic product per capita. 
    Each bubble represents a country, with its size being proportional to the population of that country. Countries are coloured according to their geographic location.
    Mouse over the location legend to isolate countries from that region. Drag the slider or click the play button to change the year displayed.
    <div class="slidercontainer">
        <button id = "playScatter">Play</button><span id="yearDisplay">1960</span>
        <input type="range" min="1960" max="2015" value="1960" step="5" class="slider" id="yearSlider"> 
    </div>
    <div id="scatterVis"></div>

    <h2>Years of life lost and by cause of mortality and economic group</h1>
    The visual to below to the left shows years of life lost due to premature mortality by cause, for 2017.
    Mortality causes are divided into 3 high-level categories and a number of subcategories for each. 
    Each cause is represented by a bubble with its size indicating the number of years of life lost. 
    Years of life lost are calculated by subtracting the age at death from the life expectancy for a person of that age.
    Mouse over any cause bubble to see its name and it's value. Values are shown as the average number of years of life lost per 1000 head of population. 
    Drag the slider to switch between showing values for low income and high income countries. The map to the right indicates the countries that make up each income group.

    <div id="treeVis">
        <div class="slidercontainer">
            <input type="range" min="0" max="3" value="0" step="1" class="slider" id="incomeSlider"> 
        </div>
    </div>

    <h2>Change in years of life lost for a single mortality cause.</h1>
    Select a cause of mortality below to see the change in years of life lost per 1000 population, from 1990 to 2017. 
    The first chart shows by world bank income group, the second by geographic area.
    <br><br><select id = "selectCause" onchange="linesUpdate()"></select>
    <div id="linesVis"></div>
    <div>
        <div id="ageVis" style="height: 1000px";>
            <h2 id="ageTitle">Mortality by age group</h2>
            The coloured bars below indicate the percentage of population dying in each age category, 
            for World Bank Low Income countries on the left and World Bank High Income countries on the right.
            The 2 black lines indicate the percentage of each population still alive at the end of the shown period. Scroll down to show.
            <br>
        </div>
        <div id="ageEnd" style="height: 1000px"></div>
    </div>
    <h2>Conclusions</h2>
    The data presented here shows clearly the link between a countries economic status and health outcomes. 
    It also shows a trend toward improved health outcomes across all income categories and geographic regions. 
    This general trend is seen across most causes of mortality although some show a different pattern.

    <br><br><br><br>
    Data used from: <br>
    <a href="http://ghdx.healthdata.org/gbd-2017">Global Health Data Exchange</a><br>
    <a href="https://data.worldbank.org/indicator/NY.GDP.PCAP.KD">The World Bank - GDP per capita (constant 2010 US$)</a><br>
    <a href="https://data.worldbank.org/indicator/sp.pop.totl">The World Bank - Population,total</a><br>
    <a href="https://www.naturalearthdata.com/">Natural Earth</a><br><br>
    <script>
    //update slider value
    var yearSlider = document.getElementById("yearSlider")
    var yearDisplay = document.getElementById("yearDisplay")
    yearSlider.oninput = function()
    {
        yearDisplay.innerHTML= this.value == 2015 ? 2017 : this.value
        scatterUpdate();
    }
    var playScatter = document.getElementById("playScatter")
    playScatter.onclick = function(){ scatterPlay() }

    var incomeSlider = document.getElementById("incomeSlider")
    incomeSlider.oninput = function(){

        tree2Update();
        mapUpdate();
    }

    </script>

    <script src="/js/common.js", charset="utf-8"></script>
    <script src="/js/scatter1.js", charset="utf-8"></script>
    <script src = "/js/pack1.js", charset="utf-8"></script>
    <script src="/js/map1.js", charset="utf-8"></script>
    <script src = "/js/causeLines1.js", charset="utf-8"></script>
    <script src = "/js/ages.js", charset="utf-8"></script>
</body>
</html>
